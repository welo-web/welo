<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Plan;
use App\Models\Service;
use Illuminate\Support\Str;

class PlanSeeder extends Seeder
{
    public function run()
    {
        $services = [
            'مطاعم' => [
                'features' => [
                    'lite' => "إدارة المخزون والمشتريات\nنقطة بيع ومبيعات يومية\nجلسات وتقارير لكل مستخدم\nبرنامج سحابي - مستخدمين غير محدودين\nدعم عربي وإنجليزي - ضرائب - خصومات\nإدارة العملاء والموظفين\nتقارير مالية دقيقة",
                    'silver' => "كل مميزات باقة لايت +\nتعدد المستودعات والفروع\nبرنامج للإدارة مع إشعارات\nتطبيق للنادل (تابلت)",
                    'gold' => "كل مميزات الباقة الفضية +\nمتجر إلكتروني للطلبات\nطلب من المنزل\nحجز الطاولات عن بُعد"
                ],
                'descriptions' => [
                    'lite' => 'إدارة المخزون والمشتريات، نقطة بيع، تقارير مالية دقيقة...',
                    'silver' => 'كل مميزات باقة لايت + تعدد المستودعات والفروع...',
                    'gold' => 'كل مميزات الباقة الفضية + متجر إلكتروني للطلبات...'
                ]
            ],
            'صالونات' => [
                'features' => [
                    'lite' => "إدارة المواعيد والحجوزات\nإدارة العملاء والموظفين\nنقطة بيع ومبيعات يومية\nتقارير مالية دقيقة\nبرنامج سحابي - مستخدمين غير محدودين\nدعم عربي وإنجليزي",
                    'silver' => "كل مميزات باقة لايت +\nتعدد الفروع\nبرنامج للإدارة مع إشعارات\nتطبيق للموظفين",
                    'gold' => "كل مميزات الباقة الفضية +\nمتجر إلكتروني للحجوزات\nحجز عن بُعد\nنظام الولاء والعملاء"
                ],
                'descriptions' => [
                    'lite' => 'إدارة المواعيد والحجوزات، نقطة بيع، تقارير مالية دقيقة...',
                    'silver' => 'كل مميزات باقة لايت + تعدد الفروع...',
                    'gold' => 'كل مميزات الباقة الفضية + متجر إلكتروني للحجوزات...'
                ]
            ],
            'محلات تجارية' => [
                'features' => [
                    'lite' => "إدارة المخزون والمشتريات\nنقطة بيع ومبيعات يومية\nإدارة العملاء والموظفين\nتقارير مالية دقيقة\nبرنامج سحابي - مستخدمين غير محدودين\nدعم عربي وإنجليزي",
                    'silver' => "كل مميزات باقة لايت +\nتعدد المستودعات والفروع\nبرنامج للإدارة مع إشعارات\nتطبيق للموظفين",
                    'gold' => "كل مميزات الباقة الفضية +\nمتجر إلكتروني\nطلب من المنزل\nنظام الولاء والعملاء"
                ],
                'descriptions' => [
                    'lite' => 'إدارة المخزون والمشتريات، نقطة بيع، تقارير مالية دقيقة...',
                    'silver' => 'كل مميزات باقة لايت + تعدد المستودعات والفروع...',
                    'gold' => 'كل مميزات الباقة الفضية + متجر إلكتروني...'
                ]
            ],
            'مستشفيات وعيادات' => [
                'features' => [
                    'lite' => "إدارة المواعيد والحجوزات\nإدارة المرضى والأطباء\nنظام الملفات الطبية\nتقارير طبية\nبرنامج سحابي - مستخدمين غير محدودين\nدعم عربي وإنجليزي",
                    'silver' => "كل مميزات باقة لايت +\nتعدد الفروع\nبرنامج للإدارة مع إشعارات\nتطبيق للأطباء",
                    'gold' => "كل مميزات الباقة الفضية +\nمنصة حجز إلكترونية\nحجز عن بُعد\nنظام المتابعة الطبية"
                ],
                'descriptions' => [
                    'lite' => 'إدارة المواعيد والحجوزات، نظام الملفات الطبية، تقارير طبية...',
                    'silver' => 'كل مميزات باقة لايت + تعدد الفروع...',
                    'gold' => 'كل مميزات الباقة الفضية + منصة حجز إلكترونية...'
                ]
            ],
            'مكاتب جلب الايدي العاملة' => [
                'features' => [
                    'lite' => "إدارة العمال والوظائف\nنظام المتابعة والتواصل\nإدارة العقود والوثائق\nتقارير مالية\nبرنامج سحابي - مستخدمين غير محدودين\nدعم عربي وإنجليزي",
                    'silver' => "كل مميزات باقة لايت +\nتعدد الفروع\nبرنامج للإدارة مع إشعارات\nتطبيق للموظفين",
                    'gold' => "كل مميزات الباقة الفضية +\nمنصة توظيف إلكترونية\nطلب عمال عن بُعد\nنظام المتابعة والتقييم"
                ],
                'descriptions' => [
                    'lite' => 'إدارة العمال والوظائف، نظام المتابعة والتواصل، تقارير مالية...',
                    'silver' => 'كل مميزات باقة لايت + تعدد الفروع...',
                    'gold' => 'كل مميزات الباقة الفضية + منصة توظيف إلكترونية...'
                ]
            ],
            'مغسلة ملابس' => [
                'features' => [
                    'lite' => "إدارة الطلبات والملابس\nإدارة العملاء والموظفين\nنظام التتبع والتسليم\nتقارير مالية\nبرنامج سحابي - مستخدمين غير محدودين\nدعم عربي وإنجليزي",
                    'silver' => "كل مميزات باقة لايت +\nتعدد الفروع\nبرنامج للإدارة مع إشعارات\nتطبيق للموظفين",
                    'gold' => "كل مميزات الباقة الفضية +\nمنصة حجز إلكترونية\nطلب عن بُعد\nنظام التتبع الإلكتروني"
                ],
                'descriptions' => [
                    'lite' => 'إدارة الطلبات والملابس، نظام التتبع والتسليم، تقارير مالية...',
                    'silver' => 'كل مميزات باقة لايت + تعدد الفروع...',
                    'gold' => 'كل مميزات الباقة الفضية + منصة حجز إلكترونية...'
                ]
            ]
        ];

        foreach ($services as $serviceName => $serviceData) {
            $service = Service::where('name', $serviceName)->first();
            if (!$service) continue;

            $plans = [
                'lite' => [
                    'name' => 'باقة لايت',
                    'color' => 'success',
                    'price_monthly' => 5,
                    'price_yearly' => 55
                ],
                'silver' => [
                    'name' => 'الباقة الفضية',
                    'color' => 'primary',
                    'price_monthly' => 10,
                    'price_yearly' => 95
                ],
                'gold' => [
                    'name' => 'الباقة الذهبية',
                    'color' => 'warning',
                    'price_monthly' => 15,
                    'price_yearly' => 150
                ]
            ];

            foreach ($plans as $planType => $planData) {
                $slug = Str::slug($service->name) . '-' . $planType;
                Plan::create([
                    'service_id' => $service->id,
                    'name' => $planData['name'],
                    'color' => $planData['color'],
                    'description' => $serviceData['descriptions'][$planType],
                    'price_monthly' => $planData['price_monthly'],
                    'price_yearly' => $planData['price_yearly'],
                    'features' => $serviceData['features'][$planType],
                    'youtube_link' => 'https://www.youtube.com/embed/ijuGBsYQkSw',
                    'slug' => $slug
                ]);
            }
        }
    }
}